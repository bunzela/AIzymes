
<style>
    body { font-family: Calibri, sans-serif; font-size: 12px; margin: 20px; }
    h1 { color: #4CAF50; font-size: 1.2em; margin-bottom: 0.5em; }
    h2 { color: #333; font-size: 1.1em; margin-bottom: 0.0em; }
    h3 { color: #555; font-size: 1.0em; margin-bottom: 0.0em; }
    p { font-size: 11px; line-height: 1.1; margin-bottom: 0; }
    p + p { margin-top: 0.0em; }
    @page { size: A4; margin: 1in; }
    @page { @bottom-right { content: "Page " counter(page); } }
</style>
<h1>Table of Contents</h1><ul>
<li><a href='#code'>1. Code</a></li>
<li><a href='#AIzymes'>1.1 AIzymes</a></li>
<li style='margin-left: 20px;'><a href='#AIzymes_AIzymes_MAIN'>1.1.1: AIzymes_MAIN</a></li>
<li style='margin-left: 20px;'><a href='#AIzymes___init__'>1.1.2: __init__</a></li>
<li style='margin-left: 20px;'><a href='#AIzymes_setup'>1.1.3: setup</a></li>
<li style='margin-left: 20px;'><a href='#AIzymes_initialize'>1.1.4: initialize</a></li>
<li style='margin-left: 20px;'><a href='#AIzymes_controller'>1.1.5: controller</a></li>
<li style='margin-left: 20px;'><a href='#AIzymes_plot'>1.1.6: plot</a></li>
<li><a href='#design_ESMfold'>1.2 design_ESMfold</a></li>
<li style='margin-left: 20px;'><a href='#design_ESMfold_prepare_ESMfold'>1.2.1: prepare_ESMfold</a></li>
<li><a href='#design_LigandMPNN'>1.3 design_LigandMPNN</a></li>
<li style='margin-left: 20px;'><a href='#design_LigandMPNN_prepare_LigandMPNN'>1.3.1: prepare_LigandMPNN</a></li>
<li><a href='#design_match'>1.4 design_match</a></li>
<li><a href='#design_ProteinMPNN'>1.5 design_ProteinMPNN</a></li>
<li style='margin-left: 20px;'><a href='#design_ProteinMPNN_prepare_ProteinMPNN'>1.5.1: prepare_ProteinMPNN</a></li>
<li><a href='#design_RosettaDesign'>1.6 design_RosettaDesign</a></li>
<li style='margin-left: 20px;'><a href='#design_RosettaDesign_prepare_RosettaDesign'>1.6.1: prepare_RosettaDesign</a></li>
<li><a href='#design_RosettaRelax'>1.7 design_RosettaRelax</a></li>
<li style='margin-left: 20px;'><a href='#design_RosettaRelax_prepare_RosettaRelax'>1.7.1: prepare_RosettaRelax</a></li>
<li><a href='#helper'>1.8 helper</a></li>
<li style='margin-left: 20px;'><a href='#helper_run_command'>1.8.1: run_command</a></li>
<li style='margin-left: 20px;'><a href='#helper_get_PDB_in'>1.8.2: get_PDB_in</a></li>
<li style='margin-left: 20px;'><a href='#helper_save_cat_res_into_all_scores_df'>1.8.3: save_cat_res_into_all_scores_df</a></li>
<li style='margin-left: 20px;'><a href='#helper_reset_to_after_index'>1.8.4: reset_to_after_index</a></li>
<li style='margin-left: 20px;'><a href='#helper_wait_for_file'>1.8.5: wait_for_file</a></li>
<li><a href='#main_design'>1.9 main_design</a></li>
<li><a href='#main_running'>1.10 main_running</a></li>
<li style='margin-left: 20px;'><a href='#main_running_start_controller'>1.10.1: start_controller</a></li>
<li style='margin-left: 20px;'><a href='#main_running_check_running_jobs'>1.10.2: check_running_jobs</a></li>
<li style='margin-left: 20px;'><a href='#main_running_update_potential'>1.10.3: update_potential</a></li>
<li style='margin-left: 20px;'><a href='#main_running_update_potential'>1.10.4: update_potential</a></li>
<li style='margin-left: 20px;'><a href='#main_running_update_scores'>1.10.5: update_scores</a></li>
<li style='margin-left: 20px;'><a href='#main_running_boltzmann_selection'>1.10.6: boltzmann_selection</a></li>
<li style='margin-left: 20px;'><a href='#main_running_check_parent_done'>1.10.7: check_parent_done</a></li>
<li style='margin-left: 20px;'><a href='#main_running_start_parent_design'>1.10.8: start_parent_design</a></li>
<li style='margin-left: 20px;'><a href='#main_running_start_calculation'>1.10.9: start_calculation</a></li>
<li style='margin-left: 20px;'><a href='#main_running_create_new_index'>1.10.10: create_new_index</a></li>
<li><a href='#main_scripts'>1.11 main_scripts</a></li>
<li><a href='#main_startup'>1.12 main_startup</a></li>
<li><a href='#plotting'>1.13 plotting</a></li>
<li style='margin-left: 20px;'><a href='#plotting_plot_interface_v_total_score_selection'>1.13.1: plot_interface_v_total_score_selection</a></li>
<li style='margin-left: 20px;'><a href='#plotting_plot_interface_v_total_score_generation'>1.13.2: plot_interface_v_total_score_generation</a></li>
<li style='margin-left: 20px;'><a href='#plotting_plot_stacked_histogram_by_cat_resi'>1.13.3: plot_stacked_histogram_by_cat_resi</a></li>
<li style='margin-left: 20px;'><a href='#plotting_plot_stacked_histogram_by_cat_resn'>1.13.4: plot_stacked_histogram_by_cat_resn</a></li>
<li style='margin-left: 20px;'><a href='#plotting_plot_stacked_histogram_by_generation'>1.13.5: plot_stacked_histogram_by_generation</a></li>
<li><a href='#scoring_efields'>1.14 scoring_efields</a></li>
<li style='margin-left: 20px;'><a href='#scoring_efields_generate_AMBER_files'>1.14.1: generate_AMBER_files</a></li>
<li style='margin-left: 20px;'><a href='#scoring_efields_calc_efields_score'>1.14.2: calc_efields_score</a></li>
<li style='margin-left: 20px;'><a href='#scoring_efields_update_efieldsdf'>1.14.3: update_efieldsdf</a></li>
<li><a href='#setup_system'>1.15 setup_system</a></li>
</ul><br><h1 id='code'>1. Code</h1><br>
<h2 id='AIzymes'>1.1 AIzymes</h2><br>
<h3 id='AIzymes_AIzymes_MAIN'>1.1.1: AIzymes_MAIN</h3><br>Main class for managing AIzymes workflow, including setup, initialization, control, and plotting functions.<br>
<h3 id='AIzymes___init__'>1.1.2: __init__</h3><br>Initializes an instance of the AIzymes_MAIN class.<br>
<h3 id='AIzymes_setup'>1.1.3: setup</h3><br>Sets up the AIzymes project environment with specified parameters.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>FOLDER_HOME (str)</span>:&nbsp;&nbsp;Path to the main folder.<br><span style='font-family:Lucida Console; font-weight:bold;'>FOLDER_PARENT (str)</span>:&nbsp;&nbsp;Path to the parent folder.<br><span style='font-family:Lucida Console; font-weight:bold;'>CST_NAME (str)</span>:&nbsp;&nbsp;Constraint name.<br><span style='font-family:Lucida Console; font-weight:bold;'>WT (str)</span>:&nbsp;&nbsp;Wild type information.<br><span style='font-family:Lucida Console; font-weight:bold;'>LIGAND (str)</span>:&nbsp;&nbsp;Ligand data.<br><span style='font-family:Lucida Console; font-weight:bold;'>DESIGN (str)</span>:&nbsp;&nbsp;Design specifications.<br><span style='font-family:Lucida Console; font-weight:bold;'>MAX_JOBS (int)</span>:&nbsp;&nbsp;Maximum number of jobs to run concurrently.<br><span style='font-family:Lucida Console; font-weight:bold;'>N_PARENT_JOBS (int)</span>:&nbsp;&nbsp;Number of parent jobs.<br><span style='font-family:Lucida Console; font-weight:bold;'>MAX_DESIGNS (int)</span>:&nbsp;&nbsp;Maximum number of designs.<br><span style='font-family:Lucida Console; font-weight:bold;'>KBT_BOLTZMANN (list)</span>:&nbsp;&nbsp;Boltzmann constant values.<br><span style='font-family:Lucida Console; font-weight:bold;'>CST_WEIGHT (float)</span>:&nbsp;&nbsp;Constraint weight.<br><span style='font-family:Lucida Console; font-weight:bold;'>ProteinMPNN_PROB (float)</span>:&nbsp;&nbsp;Probability parameter for ProteinMPNN.<br><span style='font-family:Lucida Console; font-weight:bold;'>ProteinMPNN_BIAS (float)</span>:&nbsp;&nbsp;Bias parameter for ProteinMPNN.<br><span style='font-family:Lucida Console; font-weight:bold;'>LMPNN_PROB (float)</span>:&nbsp;&nbsp;Probability parameter for LMPNN.<br><span style='font-family:Lucida Console; font-weight:bold;'>FOLDER_MATCH (str)</span>:&nbsp;&nbsp;Path to match folder.<br><span style='font-family:Lucida Console; font-weight:bold;'>ProteinMPNN_T (str)</span>:&nbsp;&nbsp;Temperature for ProteinMPNN.<br><span style='font-family:Lucida Console; font-weight:bold;'>LMPNN_T (str)</span>:&nbsp;&nbsp;Temperature for LMPNN.<br><span style='font-family:Lucida Console; font-weight:bold;'>LMPNN_BIAS (float)</span>:&nbsp;&nbsp;Bias parameter for LMPNN.<br><span style='font-family:Lucida Console; font-weight:bold;'>SUBMIT_PREFIX (str)</span>:&nbsp;&nbsp;Submission prefix.<br><span style='font-family:Lucida Console; font-weight:bold;'>SYSTEM (str)</span>:&nbsp;&nbsp;System information.<br><span style='font-family:Lucida Console; font-weight:bold;'>MATCH (str)</span>:&nbsp;&nbsp;Match specifications.<br><span style='font-family:Lucida Console; font-weight:bold;'>ROSETTA_PATH (str)</span>:&nbsp;&nbsp;Path to Rosetta source.<br><span style='font-family:Lucida Console; font-weight:bold;'>EXPLORE (bool)</span>:&nbsp;&nbsp;Whether to explore parameter space.<br><span style='font-family:Lucida Console; font-weight:bold;'>FIELD_TOOLS (str)</span>:&nbsp;&nbsp;Path to FieldTools script.<br><span style='font-family:Lucida Console; font-weight:bold;'>LOG (str)</span>:&nbsp;&nbsp;Logging level.<br><span style='font-family:Lucida Console; font-weight:bold;'>PARENT_DES_MED (str)</span>:&nbsp;&nbsp;Parent design method.<br><br>
<h3 id='AIzymes_initialize'>1.1.4: initialize</h3><br>Initializes AIzymes with given parameters.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>FOLDER_HOME (str)</span>:&nbsp;&nbsp;Path to the main folder.<br><span style='font-family:Lucida Console; font-weight:bold;'>UNBLOCK_ALL (bool)</span>:&nbsp;&nbsp;Flag to unblock all processes.<br><span style='font-family:Lucida Console; font-weight:bold;'>PRINT_VAR (bool)</span>:&nbsp;&nbsp;Flag to print variables.<br><span style='font-family:Lucida Console; font-weight:bold;'>PLOT_DATA (bool)</span>:&nbsp;&nbsp;Flag to plot data.<br><span style='font-family:Lucida Console; font-weight:bold;'>LOG (str)</span>:&nbsp;&nbsp;Logging level.<br><br>
<h3 id='AIzymes_controller'>1.1.5: controller</h3><br>Controls the AIzymes project based on scoring and normalization parameters.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>HIGHSCORE (float)</span>:&nbsp;&nbsp;High score threshold for evaluation.<br><span style='font-family:Lucida Console; font-weight:bold;'>NORM (dict)</span>:&nbsp;&nbsp;Normalization values for different scores.<br><br>
<h3 id='AIzymes_plot'>1.1.6: plot</h3><br>Generates plots based on AIzymes data, including main, tree, and landscape plots.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>main_plots (bool)</span>:&nbsp;&nbsp;Flag to generate main plots.<br><span style='font-family:Lucida Console; font-weight:bold;'>tree_plot (bool)</span>:&nbsp;&nbsp;Flag to generate tree plot.<br><span style='font-family:Lucida Console; font-weight:bold;'>landscape_plot (bool)</span>:&nbsp;&nbsp;Flag to generate landscape plot.<br><span style='font-family:Lucida Console; font-weight:bold;'>print_vals (bool)</span>:&nbsp;&nbsp;Flag to print values on plots.<br><span style='font-family:Lucida Console; font-weight:bold;'>NORM (dict)</span>:&nbsp;&nbsp;Normalization values for different scores.<br><span style='font-family:Lucida Console; font-weight:bold;'>HIGHSCORE_NEGBEST (dict)</span>:&nbsp;&nbsp;High score and negative best score for different metrics.<br><br>
<h2 id='design_ESMfold'>1.2 design_ESMfold</h2><br>
<h3 id='design_ESMfold_prepare_ESMfold'>1.2.1: prepare_ESMfold</h3><br>Predicts structure of sequence in {index} using ESMfold.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>index (str)</span>:&nbsp;&nbsp;The index of the protein variant to be predicted.<br><span style='font-family:Lucida Console; font-weight:bold;'>cmd (str)</span>:&nbsp;&nbsp;Growing list of commands to be exected by run_design using submit_job.<br><br><br><span style='color:gray; font-weight:bold;'>Returns:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>cmd (str)</span>:&nbsp;&nbsp;Command to be exected by run_design using submit_job.<br><br>
<h2 id='design_LigandMPNN'>1.3 design_LigandMPNN</h2><br>
<h3 id='design_LigandMPNN_prepare_LigandMPNN'>1.3.1: prepare_LigandMPNN</h3><br>Executes the LigandMPNN pipeline for a given protein-ligand structure and generatesnew protein sequences with potentially higher functional scores considering the ligand context.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- parent_index (str)</span>:&nbsp;&nbsp;The index of the parent protein variant.<br><span style='font-family:Lucida Console; font-weight:bold;'>- new_index (str)</span>:&nbsp;&nbsp;The index assigned to the new protein variant.<br><span style='font-family:Lucida Console; font-weight:bold;'>- all_scores_df (DataFrame)</span>:&nbsp;&nbsp;A DataFrame containing information for protein variants.<br><br>
<h2 id='design_match'>1.4 design_match</h2><br>
<h2 id='design_ProteinMPNN'>1.5 design_ProteinMPNN</h2><br>
<h3 id='design_ProteinMPNN_prepare_ProteinMPNN'>1.5.1: prepare_ProteinMPNN</h3><br>Executes the ProteinMPNN pipeline for a given protein structure and generatesnew protein sequences with potentially higher functional scores.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- new_index (str)</span>:&nbsp;&nbsp;The index of the designed variant.<br><span style='font-family:Lucida Console; font-weight:bold;'>- cmd (str)</span>:&nbsp;&nbsp;Growing list of commands to be exected by run_design using submit_job.<br><br><br><span style='color:gray; font-weight:bold;'>Returns:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- cmd (str)</span>:&nbsp;&nbsp;Command to be exected by run_design using submit_job<br><br>Note:This function assumes the ProteinMPNN toolkit is available and properly set up in the specified location.It involves multiple subprocess calls to Python scripts for processing protein structures and generating new sequences.<br>
<h2 id='design_RosettaDesign'>1.6 design_RosettaDesign</h2><br>
<h3 id='design_RosettaDesign_prepare_RosettaDesign'>1.6.1: prepare_RosettaDesign</h3><br>Designs protein structure in {new_index} based on {parent_index} using RosettaDesign.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- parent_index (str)</span>:&nbsp;&nbsp;Index of the parent protein variant to be designed.<br><span style='font-family:Lucida Console; font-weight:bold;'>- new_index (str)</span>:&nbsp;&nbsp;Index assigned to the resulting design.<br><span style='font-family:Lucida Console; font-weight:bold;'>- input_suffix (str)</span>:&nbsp;&nbsp;Suffix of the input structure to be used for design.<br><br><br><span style='color:gray; font-weight:bold;'>Returns:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- cmd (str)</span>:&nbsp;&nbsp;Command to be exected by run_design using submit_job.<br><br>
<h2 id='design_RosettaRelax'>1.7 design_RosettaRelax</h2><br>
<h3 id='design_RosettaRelax_prepare_RosettaRelax'>1.7.1: prepare_RosettaRelax</h3><br>Relaxes protein structure in {index} using RosettaRelax.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- index (str)</span>:&nbsp;&nbsp;The index of the protein variant to be relaxed.<br><span style='font-family:Lucida Console; font-weight:bold;'>- cmd (str)</span>:&nbsp;&nbsp;collection of commands to be run, this script wil append its commands to cmd<br><br>Optional parameters:- PreMatchRelax (bool): True if ESMfold to be run without ligand (prior to RosettaMatch).<br>
<h2 id='helper'>1.8 helper</h2><br>
<h3 id='helper_run_command'>1.8.1: run_command</h3><br>Wrapper to execute .py files in runtime with arguments, and print error messages if they occur.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- command</span>:&nbsp;&nbsp;The command to run as a list of strings.<br><span style='font-family:Lucida Console; font-weight:bold;'>- cwd</span>:&nbsp;&nbsp;Optional; The directory to execute the command in.<br><span style='font-family:Lucida Console; font-weight:bold;'>- capture_output</span>:&nbsp;&nbsp;Optional; If True, capture stdout and stderr. Defaults to False (This is to conserve memory).<br><br>
<h3 id='helper_get_PDB_in'>1.8.2: get_PDB_in</h3><br>Based on index, find the input PDB files for the AIzymes modules<br>Paramters:- index: The indix of the current design<br>Output:- PDBfile_Design_in: Input file for RosettaDesign- PDBfile_Relax_in: Input file for RosettaRelax- PDBfile_Relax_ligand_in: Input file for Ligand to be used in RosettaRelax<br>
<h3 id='helper_save_cat_res_into_all_scores_df'>1.8.3: save_cat_res_into_all_scores_df</h3><br>Finds the indices and names of the catalytic residue from <PDB_file_path>Saves indices and residues into <all_scores_df> in row <index> as lists.To make sure these are saved and loaded as list, ";".join() and .split(";") should be usedIf information is read from an input structure for design do not save cat_resn<br>
<h3 id='helper_reset_to_after_index'>1.8.4: reset_to_after_index</h3><br>This function resets the run back to a chosen index. It removes all later entries from the all_scores.csv and the home dir.index: The last index to keep, after which everything will be deleted.<br>
<h3 id='helper_wait_for_file'>1.8.5: wait_for_file</h3><br>Wait for a file to exist and have a non-zero size.<br>
<h2 id='main_design'>1.9 main_design</h2><br>
<h2 id='main_running'>1.10 main_running</h2><br>
<h3 id='main_running_start_controller'>1.10.1: start_controller</h3><br>Runs the main loop to manage the design process until the maximum number of designs is reached.<br>Continues submitting jobs, monitoring running processes, and updating scores based on Boltzmann selectionuntil `MAX_DESIGNS` is achieved. The function pauses or starts new designs based on system resources.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>self</span>:&nbsp;&nbsp;An instance of the AIzymes_MAIN class with setup attributes and properties.<br><br>
<h3 id='main_running_check_running_jobs'>1.10.2: check_running_jobs</h3><br>Checks the current number of running jobs based on the system type.<br>Depending on the value of `SYSTEM`, this function counts the active jobs in GRID, BLUEPEBBLE, BACKGROUND_JOB,or ABBIE_LOCAL systems.<br><br><span style='color:gray; font-weight:bold;'>Returns:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>int</span>:&nbsp;&nbsp;Number of running jobs for the specific system.<br><br>
<h3 id='main_running_update_potential'>1.10.3: update_potential</h3><br>Updates the potential file for a given score type at the specified variant index.<br>Creates or appends to a `<score_type>_potential.dat` file in `FOLDER_HOME/<index>`, calculating andupdating potentials for the parent variant if necessary.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>score_type (str)</span>:&nbsp;&nbsp;Type of score to update (e.g., total, interface, catalytic, efield).<br><span style='font-family:Lucida Console; font-weight:bold;'>index (int)</span>:&nbsp;&nbsp;Variant index to update potential data.<br><br>
<h3 id='main_running_update_potential'>1.10.4: update_potential</h3><br>Creates a <score_type>_potential.dat file in FOLDER_HOME/<index><br>If latest score comes from Rosetta Relax - then the score for variant <index>will be added to the <score_type>_potential.dat of the parent indexand the <score_type>_potential value of the dataframe for the parentwill be updated with the average of the parent and child scores.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- score_type(str)</span>:&nbsp;&nbsp;Type of score to update, one of these options: total, interface, catalytic, efield<br><span style='font-family:Lucida Console; font-weight:bold;'>- index (int)</span>:&nbsp;&nbsp;variant index to update<br><br>
<h3 id='main_running_update_scores'>1.10.5: update_scores</h3><br>Updates various scores, including total, interface, catalytic, and efield scores for each design variant.<br>This function iterates over design variants, updating scores based on files generated by different processes.It also updates sequence information, tracks mutations, and saves the updated DataFrame.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>self</span>:&nbsp;&nbsp;An instance of the AIzymes_MAIN class with setup attributes and properties.<br><br>
<h3 id='main_running_boltzmann_selection'>1.10.6: boltzmann_selection</h3><br>Selects a design variant based on a Boltzmann-weighted probability distribution.<br>Filters variants based on certain conditions (e.g., scores, block status), then computes probabilitiesusing Boltzmann factors with a temperature factor (`KBT_BOLTZMANN`) to select a variant for further design steps.<br><br><span style='color:gray; font-weight:bold;'>Returns:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>int</span>:&nbsp;&nbsp;Index of the selected design variant.<br><br>
<h3 id='main_running_check_parent_done'>1.10.7: check_parent_done</h3><br>Determines if parent designs are complete based on the number of generated designs and parent jobs.<br><br><span style='color:gray; font-weight:bold;'>Returns:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>bool</span>:&nbsp;&nbsp;True if parent designs are complete, otherwise False.<br><br>
<h3 id='main_running_start_parent_design'>1.10.8: start_parent_design</h3><br>Initiates a new design process for a parent structure by creating a new variant entry.<br>Sets up the required files and configuration for designing a parent structure, then calls the design methodspecified in `PARENT_DES_MED`.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>self</span>:&nbsp;&nbsp;An instance of the AIzymes_MAIN class with setup attributes and properties.<br><br>
<h3 id='main_running_start_calculation'>1.10.9: start_calculation</h3><br>Decides the next calculation step for the specified design variant index.<br>Based on the current design state, this function decides to run ESMfold, RosettaRelax, or a design methodfor the given index.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>parent_index (int)</span>:&nbsp;&nbsp;Index of the variant to evaluate for further calculations.<br><br>
<h3 id='main_running_create_new_index'>1.10.10: create_new_index</h3><br>Creates a new design entry in `all_scores_df` with a unique index, inheriting attributes from a parent variant.<br>Updates the DataFrame with new index information, saves the updated file, and sets up the directory structurefor the new design variant.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>parent_index (str)</span>:&nbsp;&nbsp;The index of the parent variant or "Parent" for initial designs.<br><br><br><span style='color:gray; font-weight:bold;'>Returns:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>int</span>:&nbsp;&nbsp;The newly created index for the variant.<br><br>
<h2 id='main_scripts'>1.11 main_scripts</h2><br>
<h2 id='main_startup'>1.12 main_startup</h2><br>
<h2 id='plotting'>1.13 plotting</h2><br>
<h3 id='plotting_plot_interface_v_total_score_selection'>1.13.1: plot_interface_v_total_score_selection</h3><br>Plots a scatter plot of total_scores vs interface_scores and highlights the pointscorresponding to the selected indices.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- ax (matplotlib.axes.Axes)</span>:&nbsp;&nbsp;The Axes object to plot on.<br><span style='font-family:Lucida Console; font-weight:bold;'>- total_scores (list or np.array)</span>:&nbsp;&nbsp;The total scores of the structures.<br><span style='font-family:Lucida Console; font-weight:bold;'>- interface_scores (list or np.array)</span>:&nbsp;&nbsp;The interface scores of the structures.<br><span style='font-family:Lucida Console; font-weight:bold;'>- selected_indices (list of int)</span>:&nbsp;&nbsp;Indices of the points to highlight.<br><br>
<h3 id='plotting_plot_interface_v_total_score_generation'>1.13.2: plot_interface_v_total_score_generation</h3><br>Plots a scatter plot of total_scores vs interface_scores and colors the pointsaccording to the generation for all data points, using categorical coloring.Adds a legend to represent each unique generation with its corresponding color.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- ax (matplotlib.axes.Axes)</span>:&nbsp;&nbsp;The Axes object to plot on.<br><span style='font-family:Lucida Console; font-weight:bold;'>- total_scores (list or np.array)</span>:&nbsp;&nbsp;The total scores of the structures.<br><span style='font-family:Lucida Console; font-weight:bold;'>- interface_scores (list or np.array)</span>:&nbsp;&nbsp;The interface scores of the structures.<br><span style='font-family:Lucida Console; font-weight:bold;'>- generation (pd.Series or np.array)</span>:&nbsp;&nbsp;Generation numbers for all data points.<br><br>
<h3 id='plotting_plot_stacked_histogram_by_cat_resi'>1.13.3: plot_stacked_histogram_by_cat_resi</h3><br>Plots a stacked bar plot of interface scores colored by cat_resi on the given Axes object,where each bar's segments represent counts of different cat_resi values in that bin.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- ax (matplotlib.axes.Axes)</span>:&nbsp;&nbsp;The Axes object to plot on.<br><span style='font-family:Lucida Console; font-weight:bold;'>- all_scores_df (pd.DataFrame)</span>:&nbsp;&nbsp;DataFrame containing 'cat_resi' and 'interface_score' columns.<br><span style='font-family:Lucida Console; font-weight:bold;'>- color_map (dict)</span>:&nbsp;&nbsp;Optional; A dictionary mapping catalytic residue indices to colors.<br><span style='font-family:Lucida Console; font-weight:bold;'>- show_legend (bool)</span>:&nbsp;&nbsp;Optional; Whether to show the legend. Defaults to False.<br><br>
<h3 id='plotting_plot_stacked_histogram_by_cat_resn'>1.13.4: plot_stacked_histogram_by_cat_resn</h3><br>Plots a stacked bar plot of interface scores colored by cat_resn on the given Axes object,where each bar's segments represent counts of different cat_resn values in that bin.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- ax (matplotlib.axes.Axes)</span>:&nbsp;&nbsp;The Axes object to plot on.<br><span style='font-family:Lucida Console; font-weight:bold;'>- all_scores_df (pd.DataFrame)</span>:&nbsp;&nbsp;DataFrame containing 'cat_resn' and 'interface_score' columns.<br><br>
<h3 id='plotting_plot_stacked_histogram_by_generation'>1.13.5: plot_stacked_histogram_by_generation</h3><br>Plots a stacked bar plot of interface scores colored by generation on the given Axes object,where each bar's segments represent counts of different generation values in that bin.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- ax (matplotlib.axes.Axes)</span>:&nbsp;&nbsp;The Axes object to plot on.<br><span style='font-family:Lucida Console; font-weight:bold;'>- all_scores_df (pd.DataFrame)</span>:&nbsp;&nbsp;DataFrame containing 'generation' and 'interface_score' columns.<br><br>
<h2 id='scoring_efields'>1.14 scoring_efields</h2><br>
<h3 id='scoring_efields_generate_AMBER_files'>1.14.1: generate_AMBER_files</h3><br>Uses tleap to create a .parm7 and .rst7 file from a pdb. Requires ambertools.Also requires 5TS.prepi and 5TS.frcmod in the INPUT folderTODO: Add script to generate these if not present.<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- filename (str)</span>:&nbsp;&nbsp;The path to the pdb file to analyse without the file extension.<br><br>
<h3 id='scoring_efields_calc_efields_score'>1.14.2: calc_efields_score</h3><br>Executes the FieldTools.py script to calculate the electric field across the C-H bond of 5TS.Requires a field_target.dat in the Input folder. Currently hard-coded based on 5TSTODO: Make this function agnostic to contents of field_target<br><br><span style='color:gray; font-weight:bold;'>Parameters:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- pdb_path (str)</span>:&nbsp;&nbsp;The path to the pdb structure to analyse - either from design or relax.<br><br><br><span style='color:gray; font-weight:bold;'>Returns:</span><br><span style='font-family:Lucida Console; font-weight:bold;'>- bond_field (float)</span>:&nbsp;&nbsp;The total electric field across the 5TS@C9_:5TS@H04 bond in MV/cm. (Currently hard coded to these atoms)<br><span style='font-family:Lucida Console; font-weight:bold;'>- all_fields (dict)</span>:&nbsp;&nbsp;The components of the electric field across the 5TS@C9_:5TS@H04 bond per residue.<br><br>
<h3 id='scoring_efields_update_efieldsdf'>1.14.3: update_efieldsdf</h3><br>Adds a new row to "{FOLDER_HOME}/electric_fields.csv" containing the electric fieldsgenerated by FieldTools.py for all residues in the protein<br>
<h2 id='setup_system'>1.15 setup_system</h2><br>